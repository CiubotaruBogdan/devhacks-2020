(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{67:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var s=a(4),n=a(1),l=a.n(n),i=a(17),d=a.n(i),c=a(38),o=a(42),r=a(43),h=a(49),j=a(48),b=a(23),u=a.n(b),m=a(37),p=a(77),x=a(78),O=a(75),_=a(76),v=a(45),C=a(73),g=a(74),f=a(25),k=a(46),y=a(47),N=(a(67),function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),l=0;l<s;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).default_state={viewport:{width:"100vw",height:"100vh",latitude:45.960613,longitude:24.824151,zoom:5.8},children:[],donors:[],max_index:-1,detailed_child:null,showed_elements:{child_toast:!1,help_modal:!1,add_modal:!1,donors_modal:!1},input_values:{name:"",latitude:"",longitude:"",full_address:"",phone_number:"",needs:[],family_status:[]}},e.state=JSON.parse(JSON.stringify(e.default_state)),e.changeMapViewport=function(t){return e.setState({viewport:t})},e.handleChange=function(t){var a=t.target,s=a.name,n=a.value,l=e.state.input_values;l[s]=n,e.setState({input_values:l})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.getAllChildren()}},{key:"getAllChildren",value:function(){var e=this;u.a.get("https://devhacks-api.loca.lt/get_children").set("Access-Control-Allow-Origin","*").send().then((function(t){var a=JSON.parse(t.text);e.setState({children:a,max_index:a[a.length-1].id})})).catch((function(e){console.error(e)}))}},{key:"getTopDonors",value:function(){var e=this;u.a.get("https://devhacks-api.loca.lt/get_donors").set("Access-Control-Allow-Origin","*").send().then((function(t){var a=JSON.parse(t.text);e.setState({donors:a,showed_elements:{child_toast:!1,help_modal:!1,add_modal:!1,donors_modal:!0}})})).catch((function(e){console.error(e)}))}},{key:"getChildFullDetails",value:function(e,t,a){var s=this;u.a.get("https://devhacks-api.loca.lt/get_child_details/"+e).set("Access-Control-Allow-Origin","*").send().then((function(e){s.setState({detailed_child:JSON.parse(e.text),showed_elements:{child_toast:t,help_modal:a,add_modal:!1,donors_modal:!1}})})).catch((function(e){console.error(e)}))}},{key:"selectRandomChild",value:function(){this.getChildFullDetails(Math.floor(Math.random()*this.state.max_index+1),!1,!0)}},{key:"closeeAllOverlays",value:function(){this.setState({showed_elements:{child_toast:!1,help_modal:!1,add_modal:!1,donors_modal:!1}})}},{key:"setHelpModal",value:function(e){this.setState({showed_elements:{child_toast:!1,help_modal:e,add_modal:!1,donors_modal:!1}})}},{key:"setAddModal",value:function(e){this.setState({showed_elements:{child_toast:!1,help_modal:!1,add_modal:e,donors_modal:!1}})}},{key:"handleCheckboxClick",value:function(e,t){var a=this.state.input_values,s=a[e].indexOf(t);s>0?a[e].splice(s,1):a[e].push(t),this.setState({input_values:a})}},{key:"addChild",value:function(){var e=this,t=this.state.input_values;return u.a.post("https://devhacks-api.loca.lt/add_child").set("Access-Control-Allow-Origin","*").set("Content-Type","application/x-www-form-urlencoded").send({name:t.name,latitude:t.latitude,longitude:t.longitude,full_address:t.full_address,phone_number:t.phone_number,needs:t.needs.join(),family_status:t.family_status[0]}).then((function(t){e.setAddModal(!1),Number(t.text)>0&&e.getAllChildren()})).catch((function(e){console.error(e)}))}},{key:"render",value:function(){var e=this,t=this.state.children.map((function(t){return Object(s.jsx)(m.a,{latitude:t.latitude,longitude:t.longitude,className:"marker",offsetLeft:-20,offsetTop:-10,children:Object(s.jsx)(f.a,{onClick:function(){return e.getChildFullDetails(t.id,!0,!1)}})})}));if(this.state.detailed_child)var a=this.state.detailed_child,n=Object(s.jsxs)(p.a,{className:"toast",show:this.state.showed_elements.child_toast,onClose:this.closeeAllOverlays.bind(this),children:[Object(s.jsx)(p.a.Header,{children:Object(s.jsxs)("strong",{className:"mr-auto",children:[Object(s.jsx)("b",{children:a.name})," are nevoie de ajutorul t\u0103u!"]})}),Object(s.jsxs)(p.a.Body,{children:[a.name," provine dintr-o familie cu ",Object(s.jsx)("b",{children:a.family_status}),". Are un grad de abandon \u0219colar de ",Object(s.jsxs)("b",{children:[a.abandonment_degree,"%"]}),", \xeens\u0103 ajutorul t\u0103u cu ",Object(s.jsx)("b",{children:a.needs})," ar putea s\u0103 \xeel scad\u0103.",Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)(x.a,{className:"red-button",variant:"primary",size:"sm",block:!0,onClick:this.setHelpModal.bind(this,!0),children:"Ajut\u0103"})]})]}),l=Object(s.jsxs)(O.a,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:this.state.showed_elements.help_modal,children:[Object(s.jsx)(O.a.Header,{children:Object(s.jsxs)(O.a.Title,{id:"contained-modal-title-vcenter",children:["\xcenc\u0103 pu\u021bin \u0219i ",Object(s.jsx)("b",{children:a.name})," prime\u0219te ajutorul t\u0103u!"]})}),Object(s.jsxs)(O.a.Body,{children:[a.name," provine dintr-o familie cu ",Object(s.jsx)("b",{children:a.family_status}),". Are un grad de abandon \u0219colar de ",Object(s.jsxs)("b",{children:[a.abandonment_degree,"%"]}),", \xeens\u0103 ajutorul t\u0103u cu ",Object(s.jsx)("b",{children:a.needs})," ar putea s\u0103 \xeel scad\u0103.",Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),"\xcei po\u021bi contacta parin\u021bii la num\u0103rul de telefon ",Object(s.jsx)("b",{children:a.phone_number})," sau \xeei po\u021bi face o surpriz\u0103 merg\xe2nd sau livr\xe2nd la domiciliu, la adresa ",Object(s.jsx)("b",{children:a.full_address}),".",Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsxs)(_.a,{children:[Object(s.jsx)(_.a.Control,{size:"sm",type:"text",placeholder:"Nume Complet",className:"padded-input"}),Object(s.jsx)(_.a.Control,{size:"sm",type:"text",placeholder:"Nevoile Acoperite de Ajutorul Dumneavoastr\u0103",className:"padded-input"})]})]}),Object(s.jsxs)(O.a.Footer,{children:[Object(s.jsx)(x.a,{className:"red-button",onClick:this.addChild.bind(this),children:"Salveaz\u0103"}),Object(s.jsx)(x.a,{className:"dark-button",onClick:this.setHelpModal.bind(this,!1),children:"\xcenchide"})]})]});var i=Object(s.jsxs)(O.a,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:this.state.showed_elements.add_modal,children:[Object(s.jsx)(O.a.Header,{children:Object(s.jsx)(O.a.Title,{id:"contained-modal-title-vcenter",children:"Adaug\u0103 un copil care are nevoie de ajutor!"})}),Object(s.jsx)(O.a.Body,{children:Object(s.jsxs)(_.a,{children:[Object(s.jsx)(_.a.Control,{size:"sm",type:"text",name:"name",placeholder:"Nume Complet",value:this.state.input_values.name,onChange:this.handleChange,className:"padded-input"}),Object(s.jsxs)(_.a.Row,{children:[Object(s.jsx)(v.a,{children:Object(s.jsx)(_.a.Control,{size:"sm",type:"number",name:"latitude",placeholder:"Latitudine",value:this.state.input_values.latitude,onChange:this.handleChange,className:"padded-input"})}),Object(s.jsx)(v.a,{children:Object(s.jsx)(_.a.Control,{size:"sm",type:"number",name:"longitude",placeholder:"Longitudine",value:this.state.input_values.longitude,onChange:this.handleChange,className:"padded-input"})})]}),Object(s.jsx)(_.a.Control,{size:"sm",type:"text",placeholder:"Adresa Domiciliului",name:"full_address",value:this.state.input_values.full_address,onChange:this.handleChange,className:"padded-input"}),Object(s.jsx)(_.a.Control,{size:"sm",type:"text",placeholder:"Num\u0103r de Telefon",name:"phone_number",value:this.state.input_values.phone_number,onChange:this.handleChange,className:"padded-input"}),Object(s.jsxs)(_.a.Row,{children:[Object(s.jsxs)(v.a,{children:[Object(s.jsx)(_.a.Label,{children:Object(s.jsx)("b",{children:"Nevoile Copilului"})}),Object(s.jsx)("br",{}),Object(s.jsxs)(_.a.Group,{id:"needs",children:[Object(s.jsx)(_.a.Check,{type:"checkbox",label:"calculator",onClick:this.handleCheckboxClick.bind(this,"needs",0)}),Object(s.jsx)(_.a.Check,{type:"checkbox",label:"tablet\u0103",onClick:this.handleCheckboxClick.bind(this,"needs",1)}),Object(s.jsx)(_.a.Check,{type:"checkbox",label:"rechizite",onClick:this.handleCheckboxClick.bind(this,"needs",2)})]})]}),Object(s.jsxs)(v.a,{children:[Object(s.jsx)(_.a.Label,{children:Object(s.jsx)("b",{children:"Starea Familiei"})}),Object(s.jsx)("br",{}),Object(s.jsxs)(_.a.Group,{id:"family_status",children:[Object(s.jsx)(_.a.Check,{type:"radio",label:"ambii parinti angajati",onClick:this.handleCheckboxClick.bind(this,"family_status",0)}),Object(s.jsx)(_.a.Check,{type:"radio",label:"un parinte angajat, altul somer",onClick:this.handleCheckboxClick.bind(this,"family_status",1)})]})]})]})]})}),Object(s.jsxs)(O.a.Footer,{children:[Object(s.jsx)(x.a,{className:"red-button",onClick:this.addChild.bind(this),children:"Adaug\u0103"}),Object(s.jsx)(x.a,{className:"dark-button",onClick:this.setAddModal.bind(this,!1),children:"\xcenchide"})]})]}),d=this.state.donors.map((function(e,t){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:Object(s.jsx)(f.b,{})}),Object(s.jsx)("td",{children:e.name}),Object(s.jsx)("td",{children:e.donation_sum})]})})),o=Object(s.jsxs)(O.a,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:this.state.showed_elements.donors_modal,children:[Object(s.jsx)(O.a.Header,{children:Object(s.jsx)(O.a.Title,{id:"contained-modal-title-vcenter",children:"Topul Donatorilor"})}),Object(s.jsx)(O.a.Body,{children:Object(s.jsxs)(C.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Pozi\u021bie"}),Object(s.jsx)("th",{children:"Nume Complet"}),Object(s.jsx)("th",{children:"Sum\u0103 Donat\u0103"})]})}),Object(s.jsx)("tbody",{children:d})]})}),Object(s.jsx)(O.a.Footer,{children:Object(s.jsx)(x.a,{className:"dark-button",onClick:this.closeeAllOverlays.bind(this),children:"Inchide"})})]});return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(m.b,Object(c.a)(Object(c.a)({},this.state.viewport),{},{mapboxApiAccessToken:"pk.eyJ1IjoiaW9zaWZhY2hlIiwiYSI6ImNrYjlwb2hqMTBnYWUycnJ4bGNxcDVzb2EifQ.VJlYYZGiM5gzrsCBbVyKEw",onViewportChange:this.changeMapViewport,children:t})),Object(s.jsx)("div",{className:"custom-border bottom-border"}),Object(s.jsx)("div",{className:"custom-border upper-border"}),Object(s.jsx)("div",{className:"custom-border left-border"}),Object(s.jsx)("div",{className:"custom-border right-border"}),Object(s.jsx)("a",{href:"https://roguetesting.club/devHacks2020/",children:Object(s.jsx)(g.a,{src:"images/logo.png",className:"logo"})}),Object(s.jsxs)(x.a,{className:"menu-button random red-button",onClick:this.selectRandomChild.bind(this),children:[Object(s.jsx)(f.c,{}),"Alege Aleator"]}),Object(s.jsxs)(x.a,{className:"menu-button add red-button",onClick:this.setAddModal.bind(this,!0),children:[Object(s.jsx)(k.a,{}),"Adaug\u0103"]}),Object(s.jsx)("a",{href:"https://roguetesting.club/devHacks2020/",children:Object(s.jsxs)(x.a,{className:"menu-button back dark-button",children:[Object(s.jsx)(y.a,{}),"\xcenapoi"]})}),Object(s.jsx)(f.b,{className:"crown",onClick:this.getTopDonors.bind(this)}),n,l,i,o]})}}]),a}(n.Component));a(69);d.a.render(Object(s.jsx)(l.a.StrictMode,{children:Object(s.jsx)(N,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.51bea6b9.chunk.js.map